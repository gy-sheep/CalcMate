# Q0018: 다음 항목들중 작업 우선 순위 체크

**날짜**: 2026-03-02
**원본**: [PROPMTS.md](../PROPMTS.md#q0018)

## 질문

1. 무료, 유료 구분을 위한 구조 작업 -> 구분에 따라 제공 기능이 달라짐, 무료 버전에는 광고
2. 메인 화면의 메뉴는 순서화, visible여부를 설정에서 수정할수 있음 -> 이러한 내용 때문에 먼저 설정 화면 작업
3. 기존 작업 흐름대로 작업

## 답변

### 추천 순서: 3 → 1 → 2

---

### 1순위: 기존 작업 흐름대로 (Phase 3+ 계산기 구현)

**이유:**

- 현재 13개 중 2개(기본, 환율)만 완성. **기능이 더 있어야 무료/유료 경계를 판단할 수 있음**
- Phase 1~2에서 확립한 패턴(Notifier + Intent, Freezed State, UseCase TDD)을 그대로 재활용하므로 **구현 속도가 가장 빠른 시점**
- 단위변환기(Phase 3), 부가세(Phase 4), 나이(Phase 5) 등은 API 호출 없이 순수 로직이라 빠르게 쌓을 수 있음
- 무료/유료 구분은 각 계산기의 **진입점에 gate 체크만 추가**하면 되므로, 나중에 해도 기존 코드 변경이 거의 없음

**목표 시점**: Phase 5~6 정도까지 구현 후 다음 단계로

---

### 2순위: 무료/유료 구분 구조 작업

**이유:**

- 계산기가 5~6개 이상 되면 **어떤 기능을 유료로 묶을지 현실적 판단 가능**
- 구조적으로 필요한 것:
  - `CalcModeEntry`에 `isFree: bool` 필드 추가
  - Feature gate 미들웨어 (잠금 화면 or 구매 유도 다이얼로그)
  - 광고 SDK 연동 (AdMob 등) — 무료 버전 전용
  - IAP(인앱결제) 연동 — 유료 잠금 해제
- 이것들은 **개별 계산기 내부 로직에 영향을 주지 않음** → 나중에 추가해도 리팩토링 부담 작음

---

### 3순위: 설정 화면 (메뉴 순서/표시 설정)

**이유:**

- `CalcModeEntry`에 이미 `order` 필드가 있어 구조적 준비는 되어 있음
- 하지만 현재 동작하는 계산기가 2개뿐인 상태에서 **13개 항목 재정렬 UI를 만들어도 실용성이 낮음**
- 설정 화면은 무료/유료 구분 이후에 만드는 것이 자연스러움:
  - 유료 사용자 → 모든 메뉴 순서/표시 설정 가능
  - 무료 사용자 → 제한된 설정만 가능
  - **무료/유료 정책이 결정되어야 설정 화면의 범위가 확정됨**
- 로드맵에서도 Phase 14(마무리/출시)에 설정 화면이 배치되어 있음

---

### 요약

| 순서 | 항목 | 시점 | 근거 |
|:---:|------|------|------|
| 1 | 기존 흐름 (Phase 3~6) | **지금** | 패턴 재활용, 속도 극대화 |
| 2 | 무료/유료 구분 | Phase 5~6 완료 후 | 기능이 충분해야 경계 판단 가능 |
| 3 | 설정 화면 | 무료/유료 확정 후 | 정책에 따라 설정 범위가 달라짐 |

---

### 추가 논의: 광고 배치와 UI 영향

광고(배너)는 화면 최하단에 고정하는 것이 표준이며, 현재 `Expanded` + `Column` 레이아웃 구조 덕분에 추후 광고 추가 시 UI 깨짐 위험이 낮음.

```dart
// 광고 추가 시 공통 래퍼로 대응 가능
class CalcScaffold extends StatelessWidget {
  final Widget child;
  // ...
  @override
  Widget build(BuildContext context) {
    return Column(
      children: [
        Expanded(child: child),       // 자동으로 줄어듦
        if (!isPremium) AdBanner(),    // 50dp 고정
      ],
    );
  }
}
```

계산기 내부 코드 수정 없이 바깥 래퍼만 씌우면 되므로, 추후 대응으로 충분함.
