# Q0009: 다음 작업을 진행하려고 하는데 어떤 작업을 우선 진행하는게 좋을지 생각해봐줄래

**날짜**: 2026-02-27
**원본**: [PROPMTS.md](../PROPMTS.md#q0009)

## 질문

1. 현재 List의 카드 메뉴가 main_screen.dart에 전부 코딩 되어 있기 때문에 이부분 개선 작업
2. 기본 계산기 클릭 시 상세 화면
3. 제시한 항목 이외에 더 좋은 생각이 있으면 의견 줘

## 답변

### 권장 순서

**1순위: Phase 0 인프라 마무리 (먼저 해야 함)**

두 작업 모두 Riverpod 없이 진행하면 나중에 구조를 뜯어고쳐야 합니다.

```yaml
# pubspec.yaml 추가 예정
flutter_riverpod
freezed / json_serializable
dio / retrofit
shared_preferences
```

---

**2순위: 카드 리스트 리팩터링 (1번 항목)**

Riverpod 설정 후 진행해야 제대로 된 구조가 나옵니다. 리팩터링 방향은 아래와 같습니다.

```
현재: main_screen.dart에 CalcModeCard 13개 하드코딩
↓
목표: 데이터 분리 + Provider로 관리
```

```dart
// domain/models/calc_mode_entry.dart (Freezed)
@freezed
class CalcModeEntry with _$CalcModeEntry {
  const factory CalcModeEntry({
    required String id,
    required String title,
    required String description,
    required IconData icon,
    required String imagePath,
    required bool isVisible,
    required int order,
  }) = _CalcModeEntry;
}

// core/config/calc_mode_config.dart
// 13개 기본 항목 정의 (상수)

// presentation/main/main_screen_viewmodel.dart (Notifier)
// shared_preferences에서 순서/표시 설정 읽어 리스트 제공
```

`MainScreen`은 Provider를 구독만 하면 되고, 나중에 설정 화면에서 순서/표시 변경도 자연스럽게 연결됩니다 (Q0007 요구사항 충족).

---

**3순위: 기본 계산기 상세 화면 (2번 항목, Phase 1)**

인프라와 카드 구조가 정리된 후, Phase 1 순서대로:

```
TDD: EvaluateExpressionUseCase 테스트 작성
→ UseCase 구현
→ CalculatorState (Freezed) + CalculatorIntent (sealed class)
→ CalculatorViewModel (Riverpod Notifier)
→ UI (결과창 + 버튼 패드)
```

---

### 정리

| 순서 | 작업 | 이유 |
|------|------|------|
| 1 | Phase 0 의존성 추가 (Riverpod 등) | 나머지 모든 작업의 기반 |
| 2 | 카드 리스트 데이터 분리 | 설정 화면 연동까지 고려한 구조 확보 |
| 3 | 기본 계산기 상세 화면 | Phase 1 본격 시작 |
