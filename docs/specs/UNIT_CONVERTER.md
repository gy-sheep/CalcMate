# 단위 변환기 스펙

> **Phase**: `Phase 3`
> **한 줄 설명**: 길이/질량/넓이/부피/온도/시간/압력/속도/연비/데이터 10개 카테고리의 단위를 실시간 변환하는 계산기

---

## 개요

사용자가 단위 카테고리(길이, 질량, 넓이, 부피, 온도, 시간, 압력, 속도, 연비, 데이터)를 선택하면 해당 카테고리의 모든 단위가 리스트로 표시된다.
아무 단위 행을 탭하여 활성화한 뒤 값을 입력하면, 나머지 모든 단위의 변환 결과가 실시간으로 업데이트된다.
숫자 전용 키패드(4×4)로 값을 입력하며, 수식 입력은 지원하지 않는다.
모든 변환 공식은 하드코딩된 상수로 처리하므로 네트워크 연결이 필요 없다.

---

## 화면 구성

```
┌──────────────────────────────────┐
│  ← [아이콘] 단위 변환기          │  ← 앱바 (Hero 애니메이션)
├──────────────────────────────────┤
│  [길이] [질량] [넓이] ... [데이터] │  ← 카테고리 탭 (가로 스크롤, 10개)
├──────────────────────────────────┤
│                                  │
│  mm   밀리미터         1,234,560 │  ← 비활성 행
│  cm   센티미터           123,456 │  ← 활성 행 (입력 중, 하이라이트)
│  m    미터              1,234.56 │
│  km   킬로미터            1.235  │
│  in   인치             48,605.5  │
│  ft   피트              4,050.5  │
│  yd   야드              1,350.2  │
│  mi   마일                0.767  │
│                                  │  ← 단위 리스트 (스크롤 가능)
├──────────────────────────────────┤
│  7  │   8  │  9  │  ⌫          │
│  4  │   5  │  6  │  AC         │
│  1  │   2  │  3  │             │
│  0  │  00  │  .  │  ±          │
└──────────────────────────────────┘
```

**테마**: 구현 시 별도 선정 예정

---

## 기능 요구사항

### 카테고리 선택

- 화면 상단에 10개 카테고리 탭을 가로 스크롤로 배치한다
- 카테고리: **길이**, **질량**, **넓이**, **부피**, **온도**, **시간**, **압력**, **속도**, **연비**, **데이터**
- 선택된 카테고리는 하이라이트(배경색 또는 밑줄)로 구분한다
- 카테고리 변경 시 활성 단위는 해당 카테고리의 기본 단위로, 입력값은 `0`으로 초기화한다

### 단위 리스트

- 선택된 카테고리의 모든 단위를 리스트로 표시한다
- 각 행: `단위 코드` + `한글명` + `변환 결과값`
- 활성 행(입력 중인 단위)은 하이라이트로 구분한다
- 아무 행을 탭하면 해당 단위가 활성 단위로 전환된다
  - 기존 활성 행의 현재 값을 기준으로, 새 활성 단위의 값을 역산하여 입력값으로 설정한다
  - 나머지 행의 변환 결과는 그대로 유지된다
- 단위가 화면을 초과하는 경우 스크롤 가능

### 값 입력

- 키패드는 4×4 레이아웃 (숫자 전용)
- 숫자(`0-9`, `00`), `.`, `⌫`, `AC`, `±`
- 활성 행만 편집 가능 (나머지 행은 항상 변환 결과 표시)
- `±`: 부호 전환 (양수 ↔ 음수). 온도 등 음수 입력이 필요한 카테고리에서 사용
- **자릿수 제한**: 정수부 최대 12자리, 소수부 최대 8자리. 초과 시 토스트로 안내
- `00` 키: 선행 0 방지 (입력이 `0`이면 무시), 자릿수 제한에 따라 0을 1개 또는 2개 추가
- 입력값에는 천 단위 콤마가 자동 적용되어 표시

### 변환 계산

- 입력값이 변경될 때마다 즉시 리스트 내 모든 단위의 변환 결과를 계산하여 표시한다
- **변환 공식**:
  - 일반 단위: `입력값 × (활성단위의 기준 변환율 / 대상단위의 기준 변환율)`
  - 온도: 별도 변환 공식 사용 (섹션 참고)
  - 연비: 역수 관계 변환 포함 (섹션 참고)

### 결과 표시 규칙

| 조건 | 표시 형식 |
|------|-----------|
| 1,000,000 이상 | 소수점 없이 정수 표시 + 천 단위 콤마 (예: `1,234,567`) |
| 1 이상 1,000,000 미만 | 유효숫자 기준 소수점 최대 6자리 (예: `1,234.56`) |
| 0.0001 이상 1 미만 | 소수점 최대 8자리 (예: `0.00123456`) |
| 0.0001 미만 (0 아닌 경우) | 지수 표기법 (예: `1.23e-7`) |
| 0 | `0` |

- 불필요한 후행 0은 제거한다 (예: `1.50` → `1.5`)

---

## 지원 단위

### 길이

| 코드 | 한글명 | 기준(m) |
|------|--------|---------|
| mm | 밀리미터 | 0.001 |
| cm | 센티미터 | 0.01 |
| m | 미터 | 1 |
| km | 킬로미터 | 1,000 |
| in | 인치 | 0.0254 |
| ft | 피트 | 0.3048 |
| yd | 야드 | 0.9144 |
| mi | 마일 | 1,609.344 |

- **기본 활성 단위**: `cm`

### 질량

| 코드 | 한글명 | 기준(g) |
|------|--------|---------|
| mg | 밀리그램 | 0.001 |
| g | 그램 | 1 |
| kg | 킬로그램 | 1,000 |
| t | 톤 | 1,000,000 |
| oz | 온스 | 28.3495 |
| lb | 파운드 | 453.592 |

- **기본 활성 단위**: `kg`

### 넓이

| 코드 | 한글명 | 기준(m²) |
|------|--------|----------|
| mm² | 제곱밀리미터 | 0.000001 |
| cm² | 제곱센티미터 | 0.0001 |
| m² | 제곱미터 | 1 |
| km² | 제곱킬로미터 | 1,000,000 |
| ha | 헥타르 | 10,000 |
| ac | 에이커 | 4,046.8564224 |
| ft² | 제곱피트 | 0.09290304 |
| 평 | 평 | 3.305785 |

- **기본 활성 단위**: `m²`

### 부피

| 코드 | 한글명 | 기준(mL) |
|------|--------|----------|
| mL | 밀리리터 | 1 |
| L | 리터 | 1,000 |
| m³ | 세제곱미터 | 1,000,000 |
| gal | 갤런(US) | 3,785.41 |
| qt | 쿼트(US) | 946.353 |
| pt | 파인트(US) | 473.176 |
| fl oz | 액량온스(US) | 29.5735 |
| cup | 컵(US) | 236.588 |

- **기본 활성 단위**: `L`

### 온도

| 코드 | 한글명 |
|------|--------|
| °C | 섭씨 |
| °F | 화씨 |
| K | 켈빈 |

**온도 변환 공식** (기준 단위 없이 직접 변환):

| From → To | 공식 |
|-----------|------|
| °C → °F | `°F = °C × 9/5 + 32` |
| °C → K | `K = °C + 273.15` |
| °F → °C | `°C = (°F - 32) × 5/9` |
| °F → K | `K = (°F - 32) × 5/9 + 273.15` |
| K → °C | `°C = K - 273.15` |
| K → °F | `°F = (K - 273.15) × 9/5 + 32` |

- **기본 활성 단위**: `°C`

### 시간

| 코드 | 한글명 | 기준(s) |
|------|--------|---------|
| ms | 밀리초 | 0.001 |
| s | 초 | 1 |
| min | 분 | 60 |
| h | 시간 | 3,600 |
| day | 일 | 86,400 |
| week | 주 | 604,800 |
| month | 개월 | 2,592,000 (30일 기준) |
| year | 년 | 31,536,000 (365일 기준) |

- **기본 활성 단위**: `h`

### 압력

| 코드 | 한글명 | 기준(Pa) |
|------|--------|----------|
| Pa | 파스칼 | 1 |
| kPa | 킬로파스칼 | 1,000 |
| MPa | 메가파스칼 | 1,000,000 |
| bar | 바 | 100,000 |
| atm | 기압 | 101,325 |
| mmHg | 수은주밀리미터 | 133.322 |
| psi | 제곱인치당파운드 | 6,894.757 |

- **기본 활성 단위**: `atm`

### 속도

| 코드 | 한글명 | 기준(m/s) |
|------|--------|-----------|
| m/s | 미터/초 | 1 |
| km/h | 킬로미터/시 | 0.277778 |
| mph | 마일/시 | 0.44704 |
| kn | 노트 | 0.514444 |
| ft/s | 피트/초 | 0.3048 |

- **기본 활성 단위**: `km/h`

### 연비

| 코드 | 한글명 | 타입 |
|------|--------|------|
| km/L | 킬로미터/리터 | 직접 (높을수록 효율적) |
| L/100km | 리터/100킬로미터 | 역수 (낮을수록 효율적) |
| mpg(US) | 마일/갤런(US) | 직접 |
| mpg(UK) | 마일/갤런(UK) | 직접 |

**연비 변환 공식** (직접/역수 혼합):

| 변환 | 공식 |
|------|------|
| km/L → L/100km | `100 / km/L` |
| km/L → mpg(US) | `km/L × 2.352145` |
| km/L → mpg(UK) | `km/L × 2.824809` |
| L/100km → km/L | `100 / L/100km` |
| L/100km → mpg(US) | `235.2145 / L/100km` |
| L/100km → mpg(UK) | `282.4809 / L/100km` |
| mpg(US) → km/L | `mpg(US) × 0.425144` |
| mpg(UK) → km/L | `mpg(UK) × 0.354006` |

- **기본 활성 단위**: `km/L`

### 데이터

| 코드 | 한글명 | 기준(B) |
|------|--------|---------|
| bit | 비트 | 0.125 |
| B | 바이트 | 1 |
| KB | 킬로바이트 | 1,024 |
| MB | 메가바이트 | 1,048,576 |
| GB | 기가바이트 | 1,073,741,824 |
| TB | 테라바이트 | 1,099,511,627,776 |
| PB | 페타바이트 | 1,125,899,906,842,624 |

- **기본 활성 단위**: `GB`

---

## 예외 / 엣지 케이스

| 상황 | 기대 동작 |
|------|-----------|
| 입력값이 비어있거나 `-`만 있는 경우 | 모든 변환 결과 `0` 표시 |
| 매우 큰 값 변환 (오버플로우) | 지수 표기법으로 표시 (예: `1.23e+15`) |
| 매우 작은 값 변환 | 지수 표기법으로 표시 (예: `1.23e-10`) |
| 온도 음수 입력 | 정상 처리 (예: `-40°C = -40°F`) |
| 켈빈 음수 결과 | 변환 결과 그대로 표시 (물리적 유효성 검증 안 함) |
| 연비 입력값 `0` | `L/100km` 등 역수 변환 시 `0 ÷ 0` 방지 → 결과 `0` 표시 |
| 데이터 대용량 변환 (PB → bit) | 지수 표기법으로 표시 |
| 카테고리 변경 시 | 입력값 `0`으로 초기화, 활성 단위를 해당 카테고리 기본값으로 변경 |
| 활성 행 전환 시 | 현재 표시된 변환 결과값을 새 활성 단위의 입력값으로 설정, 나머지 결과 유지 |

---

## 비기능 요구사항

- **성능**: 입력값 변경 시 변환 결과 즉시 업데이트 (16ms 이내)
- **오프라인**: 네트워크 불필요 (모든 변환 상수가 앱 내장)
- **접근성**: 단위 코드와 한글명을 함께 표시하여 가독성 확보

---

## 수정 요청

> 개발 중 수정이 필요하다고 느낀 항목을 여기에 기록한다.
> 완료된 항목은 **상태**를 `수정완료`로 변경한다.

---

---

## 참고 / 레퍼런스

- 로드맵: `docs/plans/ROADMAP.md` — Phase 3
- 숫자 전용 키패드 (수식 입력 미지원)
